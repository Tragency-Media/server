(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,n){e.exports={heading:"Post_heading__30AYa",container:"Post_container__H1lDI",field:"Post_field__2GTFn",button:"Post_button__YN0kQ",input:"Post_input__1HFxk",textarea:"Post_textarea__1tWF4",fieldFile:"Post_fieldFile__333KE",file:"Post_file__38zqt"}},126:function(e,t,n){},13:function(e,t,n){e.exports={sidebar:"Side_sidebar__245zx",user_info:"Side_user_info__3HoYt",option:"Side_option__3zU2A",parent:"Side_parent__1fbgX",active:"Side_active__30e8_"}},14:function(e,t,n){e.exports={container:"Profile_container__2iJdu",form:"Profile_form__LQc76",userImg__input:"Profile_userImg__input__Im77K",userImg__label:"Profile_userImg__label__2sK6Y",camera__icon:"Profile_camera__icon__u2oxo",userBio__input:"Profile_userBio__input__2BxpF",update__btn:"Profile_update__btn__1aUUh",post__container:"Profile_post__container__3V0PV","post__icon--box":"Profile_post__icon--box__a_pHi",image__icon:"Profile_image__icon__jVj-J",video__icon:"Profile_video__icon__ladZh",grid__icon:"Profile_grid__icon__35A5s",icon:"Profile_icon__1gkWE",active:"Profile_active__2m_dm","post__img--container":"Profile_post__img--container__y-zLz",post__img:"Profile_post__img__9iF0_","post__images--box":"Profile_post__images--box__3i4Si","post__vlogs--box":"Profile_post__vlogs--box__2SULg","post__blogs--box":"Profile_post__blogs--box__2joU1"}},161:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(31),r=n.n(c),s=n(6),o=n(42),i=n(88),l=n(89),u=n(54),j=n(3),d=n(7),b=n.n(d),p=n(11),h=n(169),m=n(16),f=Object(m.a)(),O="REGISTER_SUCESS",g="REGISTER_FAILURE",x="SIGNIN_SUCCESS",v="SIGNIN_FAILURE",y="SET_ALERT",_="REMOVE_ALERT",w="USER_LOADED",S="USER_LOAD_FAIL",k="USER_LOGOUT_SUCCESS",C="USER_LOGOUT_FAIL",N="POSTS_LOAD_FAIL",E="POSTS_LOAD_SUCCESS",T="POST_UPLOAD_SUCCESS",I="POST_UPLOAD_FAIL",P="POST_DELETE_SUCCESS",A="POST_DELETE_FAIL",R="POSTS_LIKE_UPDATE_FAIL",D="POSTS_LIKE_UPDATE_SUCCESS",L="POST_COMMENT_UPDATE_SUCCESS",F="POST_COMMENT_UPDATE_FAIL",z="INFINITE_POSTS_LOAD_SUCCESS",U="INFINITE_POSTS_LOAD_FAIL",q="POSTS_LOADING",B="POSTS_REPORT_UPDATE_SUCCESS",W="POSTS_REPORT_UPDATE_FAIL",M="LOAD_CHAT_ROOMS",Y="LOAD_ROOM",H="POST_MESSAGE",V="LOAD_DIARY",G="UPDATE_DIARY",K="ERROR_DIARY",J="LOAD_PROFILE",X="UPDATE_PROFILE",Z="SINGLE_POST",Q="SINGLE_POST_FAIL",$="GET_NOTIFICATIONS",ee="ADD_NOTIFICATION",te=n(36),ne=n.n(te),ae=ne.a.create({baseURL:"/api/auth"}),ce=ne.a.create({baseURL:"/api/post"}),re=ne.a.create({baseURL:"/api/rooms"}),se=ne.a.create({baseURL:"/api/diary"}),oe=ne.a.create({baseURL:"/api/profile"}),ie=ne.a.create({baseURL:"/api/notification"}),le=function(e,t){var n=Object(h.a)();return{type:y,payload:{id:n,msg:e,alertType:t}}},ue=function(){return function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.get("/");case 3:return n=e.sent,a=n.data.user,e.next=7,t({type:w,payload:{user:a}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:S});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(p.a)(b.a.mark((function n(a){var c,r,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=t?"/type/".concat(e,"/").concat(t,"?page=1"):"/type/".concat(e,"?page=1"),n.next=4,ce.get(c);case 4:r=n.sent,s=r.data.posts,a({type:E,payload:{posts:s}}),n.next=15;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0.response),n.t0.response.data.errors.forEach((function(e){return a(le(e.msg,"error"))})),a({type:N});case 15:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},de=function(e,t,n){return function(){var a=Object(p.a)(b.a.mark((function a(c){var r,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ce.put("/reply/".concat(e,"/").concat(t),{reply:n});case 3:r=a.sent,s=r.data.comments,c(le("Replied to comment successfully!","success")),c({type:L,payload:{id:e,comments:s}}),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return c(le(e.msg,"error"))})),c({type:F});case 14:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return function(){var a=Object(p.a)(b.a.mark((function a(c){var r,s,o;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(n),a.prev=1,r=t?"/type/".concat(e,"/").concat(t,"?page=").concat(n):"/type/".concat(e,"?page=").concat(n),a.next=5,ce.get(r);case 5:s=a.sent,o=s.data.posts,console.log(o),c({type:z,payload:{posts:o}}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),c({type:U});case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()},pe=function(){return{type:q}},he=function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.get("/".concat(e));case 3:a=t.sent,c=a.data.diary,n({type:V,payload:{diary:c}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:K});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var c=Object(p.a)(b.a.mark((function c(r){var s,o,i,l;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:c.prev=0,c.t0=n,c.next="message"===c.t0?4:7;break;case 4:return s="/broadcast/".concat(t),o="chat/".concat(t),c.abrupt("break",9);case 7:o="profile/".concat(a),s="/".concat(a);case 9:return c.next=11,ie.post(s,{options:Object(j.a)(Object(j.a)({},e),{},{url:o})});case 11:if("message"===n){c.next=17;break}return c.next=14,ie.post("/",Object(j.a)(Object(j.a)({},e),{},{user:a}));case 14:i=c.sent,l=i.data.notification,r({type:ee,payload:{notification:l}});case 17:c.next=24;break;case 19:c.prev=19,c.t1=c.catch(0),console.log(c.t1),c.t1.response.data.errors.forEach((function(e){return r(le(e.msg,"error"))}));case 24:case"end":return c.stop()}}),c,null,[[0,19]])})));return function(e){return c.apply(this,arguments)}}()},fe=(n(126),n(15)),Oe=n(96),ge=n(0),xe=["component"],ve=function(e){var t=e.component,n=Object(Oe.a)(e,xe),c=localStorage.getItem("isAuthenticated"),r=Object(s.c)(),o=Object(a.useCallback)((function(){return r(le("User not logged in","error"))}),[r]);return Object(a.useEffect)((function(){"false"===c&&o()}),[c,o]),Object(ge.jsx)(fe.b,Object(j.a)(Object(j.a)({},n),{},{render:function(){return"true"===c?t():Object(ge.jsx)(fe.a,{to:"/auth/signin"})}}))},ye=n(2),_e=n(8),we=n.p+"static/media/Logo.33c24ee0.png",Se=n(93),ke=n.n(Se),Ce=n(5);var Ne=function(){return new window.URLSearchParams(Object(fe.h)().search)},Ee=n(56),Te=n.n(Ee),Ie=function(){var e=Object(fe.g)(),t=Object(a.useState)(""),n=Object(Ce.a)(t,2),c=n[0],r=n[1],s=Ne(),o=s.get("type")?s.get("type"):"images";return Object(ge.jsxs)("form",{id:Te.a.searchBar,onSubmit:function(t){t.preventDefault(),r(""),function(t){e.push("/results?query=".concat(t,"&type=").concat(o))}(c)},children:[Object(ge.jsx)("input",{type:"text",id:Te.a.search,placeholder:"Search For Content",autoComplete:"off",value:c,onChange:function(e){return r(e.target.value)}}),Object(ge.jsx)("button",{class:Te.a.submit,children:Object(ge.jsx)(ye.x,{})})]})},Pe=Object(s.b)((function(e){return{isLoggedIn:e.auth.isAuthenticated}}))((function(e){var t=e.isLoggedIn,n=Object(s.c)(),c=Object(a.useCallback)((function(){return n(function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.post("/logout");case 3:t(le("Successfully logged out!","success")),t({type:k}),localStorage.setItem("isAuthenticated","false"),localStorage.setItem("expiryDate",new Date(0)),"/feed"!==f.location.pathname&&"/profile"!==f.location.pathname&&f.push("/auth/signin"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.data.errors.forEach((function(e){return t(le(e.msg,"error"))})),t({type:C});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}),[n]);return Object(ge.jsxs)("header",{id:ke.a.header,children:[Object(ge.jsx)(_e.a,{to:"/feed",children:Object(ge.jsx)("img",{src:we,alt:"Logo Of Tragency",className:"logo"})}),Object(ge.jsx)(Ie,{}),t?Object(ge.jsxs)("section",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(ge.jsx)(ye.d,{style:{fontSize:"2rem",color:"rgba(108, 99, 255, 1)"}})," ","\xa0\xa0\xa0",Object(ge.jsxs)("button",{onClick:function(){c()},className:"sub-heading",style:{backgroundColor:"rgba(108, 99, 255, 1)",borderRadius:" 0.8rem",fontSize:" 1.5rem",padding:" 1rem",color:" #fff",float:" right",marginTop:"0.7rem",display:"flex",justifyContent:"center",alignItems:"center"},children:["Sign Out",Object(ge.jsx)(ye.A,{style:{marginLeft:"1vw",fontSize:"2rem"}})]})]}):Object(ge.jsx)(_e.a,{to:"auth/signin",children:Object(ge.jsxs)("button",{className:"sub-heading",style:{backgroundColor:"rgba(108, 99, 255, 1)",borderRadius:" 8px",fontSize:" 1.5rem",padding:" 1rem",color:" #fff",float:" right",marginTop:"0.7rem",display:"flex",justifyContent:"center",alignItems:"center"},children:["Sign In ",Object(ge.jsx)(ye.z,{})]})})]})})),Ae=n(25),Re=n.n(Ae),De=function(){return Object(ge.jsxs)("footer",{id:Re.a.footer,children:[Object(ge.jsxs)("p",{id:Re.a.copyright,children:[Object(ge.jsx)(ye.l,{}),"2021",Object(ge.jsx)("span",{id:Re.a.highlighted,children:"Tragency"})]}),Object(ge.jsxs)("section",{id:Re.a.middleContainer,children:[Object(ge.jsx)("img",{src:we,alt:"Logo Of Tragency",className:"logo"}),Object(ge.jsxs)("section",{id:Re.a.linkContainer,children:[Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tragency.github.io/Tragency/",className:Re.a.link,children:"Home"}),Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tragency.github.io/Tragency#team",className:Re.a.link,children:"Team"}),Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tragency.github.io/Tragency#why-us",className:Re.a.link,children:"Why Us?"}),Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://tragency.github.io/Tragency#contact",className:Re.a.link,children:"Contact"})]})]}),Object(ge.jsxs)("section",{id:Re.a.links,children:[Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/Tragencytravels/",children:Object(ge.jsx)(ye.o,{})}),Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"http://instagram.com/tragency_travels",children:Object(ge.jsx)(ye.r,{})}),Object(ge.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/company/tragency-travel",children:Object(ge.jsx)(ye.s,{})})]})]})},Le=n(20),Fe=n(63),ze=n.n(Fe),Ue=function(e){var t=e.images,n=Object(a.useState)(0),c=Object(Ce.a)(n,2),r=c[0],s=c[1],o=t.map((function(e,t){return Object(ge.jsx)("img",{src:e,alt:"Post",class:"post-media ".concat(t===r?ze.a.active:""),style:{transform:"translateX(".concat((t-r)*(window.innerWidth+100),"px)"),transition:"all 0.5s ease",opacity:"".concat(t===r?1:0),position:"absolute",width:"100%",height:"100%",top:"0",left:"0"}},t)})),i=function(e){r+e>=t.length||r+e<0||s(r+e)};return Object(ge.jsxs)("section",{className:ze.a.carouselContainer,children:[t.length>1?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("i",{onClick:function(){return i(-1)},children:Object(ge.jsx)(ye.a,{})}),Object(ge.jsxs)("i",{onClick:function(){return i(1)},children:[" ",Object(ge.jsx)(ye.b,{})]})]}):null,o]})},qe=n(163),Be=n(165),We=n(167),Me=n(164),Ye=n(166),He=n(168),Ve=function(e){var t=e.setActive,n=e.caption,a=e.id,c=e.tags,s=void 0===c?"#Tragency #travel #fun #travelVillage":c;return r.a.createPortal(Object(ge.jsx)("section",{style:{position:"fixed",top:"0",left:"0",height:"100%",width:"100%",background:"rgba(0,0,0,0.4)",zIndex:"20"},className:"modal-wrapper",onClick:function(e){e.target.classList.contains("modal-wrapper")&&t(!1)},children:Object(ge.jsxs)("section",{style:{width:"30%",height:"30%",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center",padding:"2vh 2vw",background:"#fff",borderRadius:"1rem"},children:[Object(ge.jsx)(qe.a,{url:"https://tragency-media.herokuapp.com/post/".concat(a),quote:n,hashtag:s.split(" "),children:Object(ge.jsx)(Me.a,{size:64,round:!0})}),Object(ge.jsx)(Be.a,{url:"https://tragency-media.herokuapp.com/post/".concat(a),quote:n,hashtag:s,children:Object(ge.jsx)(Ye.a,{size:64,round:!0})}),Object(ge.jsx)(We.a,{url:"https://tragency-media.herokuapp.com/post/".concat(a),title:"Remotely connecting like minded travelers'. Come & connect with fellow travelers & post cool travel experience to become travel influencer. Come Take a look at this awesome post. \n          Caption: ".concat(n),children:Object(ge.jsx)(He.a,{size:64,round:!0})})]})}),document.querySelector("#modal"))},Ge=function(e){var t=e.t,n=e.post,c=e.isLast,r=e.setPage,o=e.page,i=e.loading,l=e.getInfinitePosts,u=e.location,j=Object(s.d)((function(e){return e.auth.user._id}),Le.isEqual),d=Object(s.d)((function(e){return e.auth.user}),Le.isEqual),h=Object(s.d)((function(e){return e.auth.isAuthenticated}),Le.isEqual);Object(a.useEffect)((function(){var e=function(){return g(!1)};return document.querySelector("#root").addEventListener("click",e,!0),function(){document.querySelector("#root").removeEventListener("click",e,!0)}}),[]);var m=Object(a.useState)(!1),f=Object(Ce.a)(m,2),O=f[0],g=f[1],x=Object(a.useState)(!1),v=Object(Ce.a)(x,2),y=v[0],_=v[1],w=Object(s.c)();if(0===n.content.length)return null;var S=n.likes.filter((function(e){return e.user.toString()===j})).length>0,k=function(e){S?w(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.put("/unlike/".concat(e));case 3:a=t.sent,c=a.data.likes,n(le("Post unliked successfully!","success")),n({type:D,payload:{id:e,likes:c}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:R});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(e)):(w(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.put("/like/".concat(e));case 3:a=t.sent,c=a.data.likes,n(le("Post liked successfully!","success")),n({type:D,payload:{id:e,likes:c}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:R});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(e)),w(me({title:"Post Liked!",body:"Your post was liked by @".concat(d.username),icon:"".concat(d.avatar)},"","like",n.user._id)))},C=function(e){w(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.put("/report/".concat(e));case 3:a=t.sent,c=a.data.reports,n(le("Post reported successfully!","success")),n({type:B,payload:{id:e,reports:c}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:W});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(e))},N=function(e){w(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(le("Please wait file is being deleted! It may take upto 1-2 minutes","warning")),t.next=4,ce.delete("/delete/".concat(e));case 4:n(le("Post deleted successfully!","success")),n({type:P,payload:{id:e}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:A});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e)),c&&!i&&(l(t,u,o+1),r(o+1))};return Object(ge.jsxs)("section",{class:"post container",children:[h&&Object(ge.jsxs)("i",{class:"options_button",onClick:function(){return g(!0)},children:[Object(ge.jsx)(ye.m,{}),O&&Object(ge.jsxs)("ul",{className:"options_list",style:{listStyle:"none",fontStyle:"normal",background:"white",borderRadius:"0.3rem",position:"absolute",top:"2vh",padding:"1vh 2vw",right:"0",width:"max-content",boxShadow:"rgb(0 0 0) 0.1rem 0.2rem 0.9rem"},children:[Object(ge.jsx)("li",{className:"sub-headings",onClickCapture:function(){console.log(y),_(!0),g(!1)},children:"Share"}),Object(ge.jsx)("hr",{}),j===n.user._id&&Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("li",{className:"sub-headings",onClickCapture:function(){N(n._id),g(!1)},children:"Delete"}),Object(ge.jsx)("hr",{})]}),Object(ge.jsx)("li",{className:"sub-headings",onClickCapture:function(){C(n._id),g(!1)},children:"Report as offensive"})]})]}),Object(ge.jsx)(_e.a,{to:"profile/".concat(n.user._id),children:Object(ge.jsxs)("section",{className:"post-info",children:[Object(ge.jsx)("img",{src:n.user.avatar,alt:"Profile",className:"profile-photo"}),Object(ge.jsxs)("p",{className:"sub-headings",style:{fontWeight:"bold"},children:["@",n.user.username,Object(ge.jsx)("br",{}),Object(ge.jsx)("span",{className:"note",children:"".concat(new Date(n.createdAt).toLocaleString())})]})]})}),"blogs"===t?Object(ge.jsx)("h1",{className:"heading_main",children:n.title}):"",Object(ge.jsx)("br",{}),function(){switch(t){case"images":return Object(ge.jsx)(Ue,{images:n.content});case"blogs":return Object(ge.jsx)("p",{className:"sub-headings",style:{lineHeight:"3vh",whiteSpace:"break-spaces"},children:n.content});case"vlogs":return Object(ge.jsx)("video",{src:n.content,controls:"controls",class:"post-media",onLoad:function(e){return console.log(e)}});default:return}}(),Object(ge.jsxs)("section",{className:"extras",children:[Object(ge.jsxs)("p",{className:"note ".concat(S?"likes_active":""),onClick:function(){k(n._id)},children:[Object(ge.jsx)(ye.v,{})," ",n.likes.length," Travelups"]}),Object(ge.jsx)("p",{className:"note",children:Object(ge.jsxs)(_e.a,{to:"comments/".concat(n._id),children:[" ",Object(ge.jsx)(ye.i,{})," View All ",n.comments.length," Travelcussions"]})}),Object(ge.jsxs)("p",{className:"note",children:[Object(ge.jsx)(ye.p,{})," ",n.location,","," ",Object(ge.jsx)(_e.a,{to:"/results?query=".concat(n.location,"&type=").concat(t),children:Object(ge.jsxs)("span",{class:"blue",style:{fontWeight:"300"},children:[" ","view posts related to ",n.location]})})]})]}),y&&Object(ge.jsx)(Ve,{setActive:_,caption:n.title,id:n._id,tags:n.tags}),"blogs"!==t?Object(ge.jsx)("p",{className:"sub-headings",children:n.title}):"",Object(ge.jsx)("br",{}),Object(ge.jsxs)("p",{className:"sub-headings",children:["TravelTags: ",Object(ge.jsx)("span",{className:"note blue",children:n.tags})]})]})},Ke=n(13),Je=n.n(Ke),Xe=Object(s.b)((function(e){return{username:e.auth.user.username,avatar:e.auth.user.avatar,id:e.auth.user._id,loggedIn:e.auth.isAuthenticated}}))((function(e){var t=e.username,n=e.avatar,a=e.id,c=e.loggedIn,r=Ne(),s=Object(fe.j)().url,o=r.get("query")?r.get("query"):"Ladakh",i=r.get("type")?r.get("type"):"images",l=Object(fe.g)(),u=function(e){return i&&i.toLowerCase()===e?"active":""},j=function(e){return l.push(e)};return Object(ge.jsxs)("aside",{id:Je.a.sidebar,children:[c&&Object(ge.jsxs)(_e.a,{to:"profile/".concat(a),children:[" ",Object(ge.jsxs)("section",{id:Je.a.user_info,children:[Object(ge.jsx)("img",{src:n,alt:"Profile",className:"profile-photo",style:{margin:"0.5rem"}}),Object(ge.jsxs)("p",{className:"heading_main",style:{fontSize:"1.5rem",fontWeight:"bold"},children:["@",t]})]})]}),Object(ge.jsx)("section",{class:"".concat(Je.a.parent," ").concat(Je.a[u("images")]),onClick:function(){return j("".concat(s).concat("/results"===s?"?query=".concat(o,"&"):"?","type=images"))},children:Object(ge.jsxs)("section",{class:"".concat(Je.a.option," note ").concat(Je.a[u("images")]),children:[Object(ge.jsx)(ye.q,{})," Images"]})}),Object(ge.jsx)("section",{class:"".concat(Je.a.parent," ").concat(Je.a[u("blogs")]),onClick:function(){return j("".concat(s).concat("/results"===s?"?query=".concat(o,"&"):"?","type=blogs"))},children:Object(ge.jsxs)("section",{class:"".concat(Je.a.option," note ").concat(Je.a[u("blogs")]),children:[Object(ge.jsx)(ye.B,{})," Blogs"]})}),Object(ge.jsx)("section",{class:"".concat(Je.a.parent," ").concat(Je.a[u("vlogs")]),onClick:function(){return j("".concat(s).concat("/results"===s?"?query=".concat(o,"&"):"?","type=vlogs"))},children:Object(ge.jsxs)("section",{class:"".concat(Je.a.option," note ").concat(Je.a[u("vlogs")]),children:[Object(ge.jsx)(ye.u,{})," Vlogs"]})}),Object(ge.jsx)("section",{className:"".concat(Je.a.parent," ").concat(Je.a["/post"===s?"active":""]),onClick:function(){return j("/post")},children:Object(ge.jsxs)("section",{class:"".concat(Je.a.option," note ").concat(Je.a["/post"===s?"active":""]),children:[Object(ge.jsx)(ye.F,{})," Post Content"]})}),Object(ge.jsx)("section",{className:"".concat(Je.a.parent," ").concat(Je.a["/chat"===s?"active":""]),onClick:function(){return j("/chat")},children:Object(ge.jsxs)("section",{class:"".concat(Je.a.option," note ").concat(Je.a["/chat"===s?"active":""]),children:[Object(ge.jsx)(ye.j,{})," Tragency Village"]})}),Object(ge.jsx)("section",{className:Je.a.parent,onClick:function(){return j("/market")},children:Object(ge.jsxs)("section",{class:"note ".concat(Je.a.option),children:[Object(ge.jsx)(ye.y,{})," Marketplace"]})})]})})),Ze=n(33),Qe=n.n(Ze),$e=function(){return Object(ge.jsxs)("aside",{id:Qe.a.container,children:[Object(ge.jsx)("section",{id:Qe.a.heading,children:Object(ge.jsx)("p",{className:"note",children:"Top Searches"})}),Object(ge.jsx)(_e.a,{to:"/results?query=j-and-k&type=images",children:Object(ge.jsxs)("section",{class:Qe.a.location,children:["Jammu ","&"," Kashmir ",Object(ge.jsx)(ye.b,{})]})}),Object(ge.jsx)(_e.a,{to:"/results?query=ladakh&type=images",children:Object(ge.jsxs)("section",{class:Qe.a.location,children:["Ladakh",Object(ge.jsx)(ye.b,{})]})}),Object(ge.jsx)(_e.a,{to:"/results?query=goa&type=images",children:Object(ge.jsxs)("section",{class:Qe.a.location,children:["Goa",Object(ge.jsx)(ye.b,{})]})}),Object(ge.jsx)(_e.a,{to:"/results?query=maldives&type=images",children:Object(ge.jsxs)("section",{class:Qe.a.location,children:["Maldives ",Object(ge.jsx)(ye.b,{})]})}),Object(ge.jsx)(_e.a,{to:"/results?query=dubai&type=images",children:Object(ge.jsxs)("section",{class:Qe.a.location,children:["Dubai ",Object(ge.jsx)(ye.b,{})]})}),Object(ge.jsx)(_e.a,{to:"/results?query=germany&type=images",children:Object(ge.jsxs)("section",{class:Qe.a.location,children:["Germany ",Object(ge.jsx)(ye.b,{})]})})]})},et=n(32),tt=n.n(et),nt=Object(s.b)((function(e){return{diary:e.diary}}),{loadDiary:he})((function(e){var t=e.diary,n=e.loadDiary;return Object(a.useEffect)((function(){n((new Date).toISOString().substr(0,10))}),[n]),Object(ge.jsxs)("aside",{id:tt.a.container,style:{width:"13vw"},children:[Object(ge.jsx)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:t.title||"Your diary title"}),Object(ge.jsx)("p",{className:"note",children:(new Date).toLocaleDateString()}),Object(ge.jsx)("hr",{}),Object(ge.jsxs)("p",{className:"note",children:[t.content?t.content.split(" ").slice(0,15).join(" "):"Your Diary here",Object(ge.jsx)(_e.a,{to:"/diary",children:Object(ge.jsx)("span",{className:"blue",children:"...Read More"})})]})]})})),at=n(37),ct=n.n(at),rt=function(){var e=Object(a.useState)(!1),t=Object(Ce.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)();Object(a.useEffect)((function(){var e=function(e){c(!1)},t=setTimeout((function(){r.current.classList.remove("".concat(ct.a.active))}),6e3);return document.querySelector("#root").addEventListener("click",e,!0),function(){document.querySelector("#root").removeEventListener("click",e,!0),clearTimeout(t)}}),[]),Object(a.useEffect)((function(){document.querySelector("#root").style.overflowY=n?"hidden":"scroll"}),[n]);return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("section",{className:ct.a.menu,style:n?{top:"0"}:{},onClick:function(e){c(!n)},children:!n&&Object(ge.jsx)(ye.c,{})||Object(ge.jsx)(ye.G,{})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsx)("section",{class:"".concat(ct.a.message," ").concat(ct.a.active),ref:r,children:"Click This To Open Sidebar"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsx)("section",{className:"".concat(ct.a.overlay," ").concat(ct.a[n?"active":""]),children:Object(ge.jsx)(Xe,{})})]})},st=Object(s.b)((function(e){return{posts:e.posts}}),{getPosts:je,getInfinitePosts:be,postsLoading:pe})((function(e){var t=e.getPosts,n=e.getInfinitePosts,c=e.postsLoading,r=e.posts,s=r.posts,o=r.loading,i=r.hasMore,l=Object(a.useState)(1),u=Object(Ce.a)(l,2),j=u[0],d=u[1],b=Object(a.useRef)(),p=Ne(),h=p.get("query"),m=p.get("type"),f=Object(a.useCallback)((function(e){o||(b.current&&b.current.disconnect(),b.current=new IntersectionObserver((function(e){e[0].isIntersecting&&i&&(c(),n(m,h,j+1),d(j+1))}),{root:null,threshold:.5,rootMargin:"0px"}),e&&b.current.observe(e))}),[o,i,n,j,m,c,h]);Object(a.useEffect)((function(){d(1),t(m,h)}),[m,h,t]);var O=Object(ge.jsxs)("section",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"column"},children:[Object(ge.jsx)(nt,{}),Object(ge.jsx)($e,{})]});console.log(s);var g=s.map((function(e,t){return null===e?null:t+1===s.length&&Object(ge.jsx)("section",{ref:f,children:Object(ge.jsx)(Ge,{t:m,post:e,isLast:!0,setPage:d,page:j,loading:o,getInfinitePosts:n,location:""},t)})||Object(ge.jsx)(Ge,{t:m,post:e},t)}));return Object(ge.jsxs)("main",{class:"main",children:[window.innerWidth>790?Object(ge.jsx)(Xe,{}):Object(ge.jsx)(rt,{}),Object(ge.jsxs)("section",{class:"out_container",children:[Object(ge.jsxs)("section",{class:"container",children:[Object(ge.jsxs)("p",{class:"heading_main",style:{textTransform:"capitalize"},children:["Showing ",m," for:"]}),Object(ge.jsx)("a",{href:"mailto:vihaan.verma@tragency.in",className:"sub-heading",style:{background:" #000",borderRadius:" 0.8rem",fontSize:" 2rem",padding:" 1rem",color:" #fff",float:" right",marginTop:"0.7rem"},children:"Report a bug"}),Object(ge.jsx)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:h}),Object(ge.jsx)("p",{class:"note bottom",children:"To change result type, please select option from sidebar"})]}),g]}),window.innerWidth>790?O:""]})})),ot=n(24),it=n(64),lt=n(10),ut=n.n(lt),jt=function(){var e=Ne(),t=e.get("type")?e.get("type"):"images",n=Object(a.useState)(t),c=Object(Ce.a)(n,2),r=c[0],o=c[1],i=Object(a.useState)([]),l=Object(Ce.a)(i,2),u=l[0],j=l[1],d=Object(a.useState)(""),h=Object(Ce.a)(d,2),m=h[0],O=h[1],g=Object(a.useState)(""),x=Object(Ce.a)(g,2),v=x[0],y=x[1],_=Object(a.useState)(""),w=Object(Ce.a)(_,2),S=w[0],k=w[1],C=Object(a.useState)(""),N=Object(Ce.a)(C,2),E=N[0],P=N[1],A=Object(a.useState)(""),R=Object(Ce.a)(A,2),D=R[0],L=R[1],F=Object(a.useState)(""),z=Object(Ce.a)(F,2),U=z[0],q=z[1],B=Object(s.c)(),W=function(e){B(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.post("/",e,{headers:{"Content-Type":"multipart/form-data"}});case 3:a=t.sent,c=a.data.post,r="blogs"===e.get("type")?"Post uploaded successfully!":"Post has been sent for review!",n(le(r,"success")),n({type:T,payload:c}),f.push("/feed?type=".concat(e.get("type"))),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:I});case 17:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))},M=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.files){e.next=3;break}return e.abrupt("return");case 3:(n=new FileReader).onload=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,q(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(t.target.files[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsxs)("form",{id:ut.a.form,onSubmit:function(e){if(e.preventDefault(),u.length>3)B(le("Cannot upload more than 3 images","error"));else{console.log(u);var t="".concat(S,", ").concat(E),n=U,a=D.split(" ").map((function(e){return""!==e?"#".concat(e):null})).join(" ").replaceAll(" ","").replaceAll("#"," #").trim(),c=new FormData;c.append("location",t),c.append("content",n),c.append("type",r),c.append("title",v),c.append("tags",a),"blogs"!==r&&u.forEach((function(e){return c.append("files",e)})),W(c)}},encType:"multipart/form-data",children:[Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsx)("label",{htmlFor:"type",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:"Type Of Post:"}),Object(ge.jsxs)("select",{required:!0,name:"type",class:ut.a.input,value:r,onChange:function(e){return o(e.target.value)},children:[Object(ge.jsx)("option",{value:"images",children:"Image"}),Object(ge.jsx)("option",{value:"blogs",children:"Blog"}),Object(ge.jsx)("option",{value:"vlogs",children:"Vlog"})]})]}),Object(ge.jsxs)("section",{class:ut.a.field,id:ut.a.fieldFile,children:[Object(ge.jsxs)("label",{htmlFor:"file",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem",textTransform:"capitalize"},children:["Upload ",r,":"]}),Object(ge.jsxs)("section",{children:["images"===r?Object(ge.jsx)(ye.q,{}):"blogs"===r?Object(ge.jsx)(ye.e,{}):Object(ge.jsx)(ye.F,{})," ",m||"No ".concat(r[0].toUpperCase()+r.substr(1)," Chosen")]}),Object(ge.jsx)("input",{multiple:"images"===r,required:"blogs"!==r,name:"file",type:"file",id:ut.a.file,class:ut.a.input,accept:"images"===r?"image/png, image/jpeg":"blogs"===r?".txt":"video/mp4",value:m,onChange:function(e){O(e.target.value),j(Object(ot.a)(e.target.files)),"blogs"===r&&M(e)}})]}),function(){if("blogs"===r)return Object(ge.jsxs)(ge.Fragment,{children:["OR",Object(ge.jsx)("br",{}),Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsx)("label",{htmlFor:"blog",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:"Write out or edit your blog:"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("textarea",{required:!0,name:"blog",class:"".concat(ut.a.input," ").concat(ut.a.textarea),cols:"50",rows:"50",value:U,onChange:function(e){return q(e.target.value)},style:{padding:"1vh 1vw",width:"90%",height:"100% "}})]})]})}(),Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsxs)("label",{htmlFor:"caption",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:["images"===r?"Caption":"Title",":"]}),Object(ge.jsx)("br",{}),Object(ge.jsx)("textarea",{required:!0,name:"caption",placeholder:"Ohh I had the best day today!",class:ut.a.input,cols:"30",rows:"3",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsx)("label",{htmlFor:"tags",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:"Traveltags:"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("textarea",{name:"tags",class:ut.a.input,placeholder:"#fun#test#great#travel#goa",cols:"30",rows:"5",value:D,onChange:function(e){return L(e.target.value)}})]}),Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsx)("label",{class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:"Location:"}),Object(ge.jsx)("br",{}),Object(ge.jsx)(it.a,{required:"blogs"!==r,value:S,onChange:function(e){return k(e)}})," ","\xa0\xa0",Object(ge.jsx)(it.b,{required:"blogs"!==r,country:S,value:E,onChange:function(e){return P(e)}})]}),Object(ge.jsx)("button",{type:"submit",class:ut.a.button,children:"submit"})]})},dt=n(21),bt=(n(52),function(){return Object(ge.jsxs)("section",{style:{width:"95%",margin:"2vh auto"},children:[Object(ge.jsx)(dt.a,{}),Object(ge.jsxs)("section",{className:"container ".concat(ut.a.container),children:[Object(ge.jsx)("h1",{class:ut.a.heading,children:"Post Cool Content"}),Object(ge.jsx)(jt,{})]})]})}),pt=Object(s.b)((function(e){var t=e.posts,n=e.auth;return{posts:t,user:n.user._id,isLoggedin:n.isAuthenticated}}),{getPosts:je,getInfinitePosts:be,postsLoading:pe})((function(e){var t=e.getPosts,n=e.getInfinitePosts,c=e.postsLoading,r=e.posts,s=r.posts,o=r.loading,i=r.hasMore,l=e.user,u=e.isLoggedin,j=Object(a.useState)(1),d=Object(Ce.a)(j,2),b=d[0],p=d[1],h=Object(a.useRef)(),m=Ne(),f=m.get("type")?m.get("type"):"images",O=Object(a.useCallback)((function(e){o||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&i&&(c(),n(f,"",b+1),p(b+1))}),{root:null,threshold:.5,rootMargin:"0px"}),e&&h.current.observe(e))}),[o,i,n,b,f,c]);Object(a.useEffect)((function(){p(1),t(f)}),[f,t,p]);var g=s.map((function(e,t){return null===e?null:t+1===s.length&&Object(ge.jsx)("section",{ref:O,children:Object(ge.jsx)(Ge,{t:f,post:e,isLast:!0,setPage:p,page:b,loading:o,getInfinitePosts:n,location:""},t)})||Object(ge.jsx)("section",{children:Object(ge.jsx)(Ge,{t:f,post:e})},t)})),x=Object(ge.jsxs)("section",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",flexDirection:"column"},children:[Object(ge.jsx)(nt,{}),Object(ge.jsx)($e,{})]});return Object(ge.jsxs)("main",{class:"main\r ",children:[window.innerWidth>790?Object(ge.jsx)(Xe,{}):Object(ge.jsx)(rt,{}),Object(ge.jsxs)("section",{class:"out_container",children:[Object(ge.jsxs)("section",{class:"container",children:[Object(ge.jsx)("h1",{class:"heading_main",style:{textTransform:"capitalize"},children:"Have Something on Your mind"}),Object(ge.jsx)("a",{href:"mailto:vihaan.verma@tragency.in",className:"sub-heading",style:{background:" #000",borderRadius:" 0.8rem",fontSize:" 2rem",padding:" 1rem",color:" #fff",float:" right",marginTop:"0.7rem"},children:"Report a bug"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("p",{class:"note",children:"To change feed type, please select option from sidebar"}),Object(ge.jsxs)("section",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(ge.jsx)(_e.a,{to:"post?type=images",children:Object(ge.jsxs)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:[Object(ge.jsx)(ye.h,{})," Post Images"]})}),Object(ge.jsx)(_e.a,{to:"post?type=vlogs",children:Object(ge.jsxs)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:[Object(ge.jsx)(ye.F,{})," Post Vlogs"]})}),Object(ge.jsx)(_e.a,{to:"post?type=blogs",children:Object(ge.jsxs)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:[Object(ge.jsx)(ye.w,{})," Post Blogs"]})}),window.innerWidth<790&&u&&Object(ge.jsx)(_e.a,{to:"/profile/".concat(l),children:Object(ge.jsxs)("h2",{class:"sub-headings",style:{textTransform:"capitalize",color:"rgba(108, 99, 255, 1)"},children:[Object(ge.jsx)(ye.E,{}),"Profile Page"]})}),Object(ge.jsx)(_e.a,{to:"/diary",children:Object(ge.jsxs)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:[Object(ge.jsx)(ye.e,{})," Edit Diary"]})}),Object(ge.jsx)(_e.a,{to:"/chat",children:Object(ge.jsxs)("h2",{class:"sub-headings",style:{textTransform:"capitalize"},children:[Object(ge.jsx)(ye.j,{})," Villages"]})})]})]}),g]}),window.innerWidth>790?x:""]})})),ht=n(14),mt=n.n(ht),ft=function(e){var t=e.post,n=e.t,a=e.setActive;return r.a.createPortal(Object(ge.jsxs)("section",{style:{position:"fixed",top:"0",left:"0",height:"100%",width:"100%",background:"rgba(0,0,0,0.4)",zIndex:"20"},className:"modal-wrapper",onClick:function(e){e.target.classList.contains("modal-wrapper")&&a(!1)},children:[Object(ge.jsxs)("i",{style:"blogs"!==n?{position:"fixed",top:"5vh",right:"8vw",fontSize:"6rem",color:"white"}:{position:"fixed",top:"2vh",right:"2vw",fontSize:"6rem",color:"white"},className:"icon",onClick:function(){a(!1)},children:[" ",Object(ge.jsx)(ye.C,{})]}),Object(ge.jsx)("br",{}),Object(ge.jsx)("section",{style:"blogs"!==n?{position:"fixed",top:"50%",left:"50%",height:"50%",transform:"translate(-50%,-50%)",width:"50%"}:{position:"fixed",top:"2vh",left:"2vw",width:"90%"},children:function(){switch(n){case"images":return Object(ge.jsxs)("section",{style:{background:"white",padding:"2vh 2vw",borderRadius:"1rem"},children:[Object(ge.jsx)(Ue,{images:t.content}),Object(ge.jsx)("h1",{className:"heading_main",children:t.title})]});case"blogs":return Object(ge.jsx)("section",{style:{background:"white",padding:"2vh 2vw",borderRadius:"1rem"},children:Object(ge.jsxs)("p",{className:"sub-headings",style:{lineHeight:"3vh",whiteSpace:"break-spaces"},children:[Object(ge.jsx)("span",{className:"heading_main",children:t.title})," ",Object(ge.jsx)("br",{}),t.content]})});case"vlogs":return Object(ge.jsxs)("section",{style:{background:"white",padding:"2vh 2vw",borderRadius:"1rem"},children:[Object(ge.jsx)("video",{src:t.content,controls:"controls",class:"post-media",autoPlay:!0}),Object(ge.jsx)("h1",{className:"heading_main",children:t.title})]});default:return}}()})]}),document.querySelector("#modal"))},Ot=Object(s.b)((function(e){var t;return{profile:e.profile,loggedInUserId:null===(t=e.auth.user)||void 0===t?void 0:t._id}}),{loadProfile:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.get("/user/".concat(e));case 3:a=t.sent,c=a.data.profile,n({type:J,payload:{profile:c}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))}));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},updateProfile:function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c,r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.post("/",e,{headers:{"Content-Type":"multipart/form-data"}});case 3:a=t.sent,c=a.data,r=c.profile,s=c.user,n({type:X,payload:{profile:r,user:s}}),n(le("Profile Updated Successfully","success")),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))}));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t,n,c,r,s=e.profile,o=e.loggedInUserId,i=e.loadProfile,l=e.updateProfile,j=f.location.pathname.split("/")[f.location.pathname.split("/").length-1];Object(a.useEffect)((function(){i(j)}),[i,j]);var d=(null===(t=s.user)||void 0===t?void 0:t._id)===o,b=Object(a.useState)("@".concat(null===(n=s.user)||void 0===n?void 0:n.username)||!1),p=Object(Ce.a)(b,2),h=p[0],m=p[1],O=Object(a.useState)(null===(c=s.user)||void 0===c?void 0:c.avatar),g=Object(Ce.a)(O,2),x=g[0],v=g[1],y=Object(a.useState)(null),_=Object(Ce.a)(y,2),w=_[0],S=_[1],k=Object(a.useState)(s.bio||""),C=Object(Ce.a)(k,2),N=C[0],E=C[1],T=Object(a.useState)("images"),I=Object(Ce.a)(T,2),P=I[0],A=I[1],R=Object(a.useState)(!1),D=Object(Ce.a)(R,2),L=D[0],F=D[1],z=Object(a.useState)(null),U=Object(Ce.a)(z,2),q=U[0],B=U[1];Object(a.useEffect)((function(){var e,t;m("@".concat(null===(e=s.user)||void 0===e?void 0:e.username)),E(s.bio),v(null===(t=s.user)||void 0===t?void 0:t.avatar)}),[s]);var W=Object(a.useRef)(null),M=function(e){for(var t=e.target;!t.classList.contains("".concat(mt.a.icon));)t=t.parentElement;var n="".concat(mt.a.active);W.current.classList.remove(n),t.classList.add(n),A(t.dataset.type),W.current=t},Y=null===(r=s.posts)||void 0===r?void 0:r.filter((function(e){return e.type===P})).map((function(e,t){return Object(ge.jsx)("div",{className:mt.a["post__".concat(P,"--box")],onClick:function(){B(e),F(!0)},children:"images"===P?Object(ge.jsxs)("span",{style:{position:"relative",height:"100%",width:"100%",display:"inline-block"},children:[Object(ge.jsx)("img",{className:mt.a.post__img,src:"".concat(e.content[0]),alt:"post-img"}),e.content.length>1&&Object(ge.jsxs)("i",{style:{position:"absolute",top:"1vh",right:"1vw",fontSize:"3rem",color:"white"},children:[" ",Object(ge.jsx)(ye.f,{})," "]})]}):"vlogs"===P?Object(ge.jsx)("video",{className:mt.a.post__img,src:"".concat(e.content[0])}):Object(ge.jsxs)("p",{className:"sub-headings",style:{lineHeight:"2.7vmax",whiteSpace:"break-spaces"},children:[e.content[0].split(" ").slice(0,25).join(" ")," ",Object(ge.jsx)("span",{class:"blue",children:"...read more"})]})},t)}));return Object(ge.jsxs)("div",{className:mt.a.container,children:[Object(ge.jsxs)(u.a,{children:[Object(ge.jsx)("meta",{property:"quote",content:"Tragency Traveller| ".concat(N||"Enjoying life as a travel influencer")}),Object(ge.jsx)("meta",{name:"title",content:"Traveller | ".concat(h)}),Object(ge.jsx)("meta",{name:"description",content:"".concat(N||"Enjoying life as a travel influencer")}),Object(ge.jsx)("meta",{property:"image",content:"".concat(x)}),Object(ge.jsx)("meta",{property:"og:quote",content:"Tragency Traveller| ".concat(N||"Enjoying life as a travel influencer")}),Object(ge.jsx)("meta",{name:"og:title",content:"Tragency Traveller| ".concat(h)}),Object(ge.jsx)("meta",{property:"og:image",content:"".concat(x)}),Object(ge.jsx)("meta",{content:"image/*",property:"og:image:type"}),Object(ge.jsx)("meta",{property:"og:url",content:"https://tragency-media.herokuapp.com/profile/".concat(j)}),Object(ge.jsx)("meta",{property:"og:description",content:"".concat(N||"Enjoying life as a travel influencer")}),Object(ge.jsx)("title",{children:"Traveller | ".concat(h)})]}),Object(ge.jsxs)("form",{className:mt.a.form,onSubmit:function(e){if(e.preventDefault(),d){var t=new FormData;t.append("username",h),t.append("bio",N),t.append("file",x),l(t)}},encType:"multipart/form-data",children:[Object(ge.jsx)("label",{className:mt.a.userImg__label,htmlFor:"name__input",style:{backgroundImage:"url(".concat(w||x,")")},children:Object(ge.jsx)(ye.g,{className:mt.a.camera__icon})}),Object(ge.jsx)("input",{id:"name__input",className:mt.a.userImg__input,type:"file",accept:"image/png, image/jpeg",onChange:function(e){if(v(e.target.files[0]),e.target.files){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){S(n.result)}}},disabled:!d}),Object(ge.jsx)("input",{className:"heading_main",type:"text",value:"".concat(h),onChange:function(e){return m(e.target.value)},required:!0,style:{textAlign:"center",fontSize:"3rem",marginBottom:"2vmax"},disabled:!d}),Object(ge.jsx)("textarea",{className:mt.a.userBio__input,name:"Bio__input",value:N,placeholder:d?"Enter your bio here":"",onChange:function(e){return E(e.target.value)},disabled:!d}),d?Object(ge.jsx)("button",{id:mt.a.update__btn,type:"submit",children:"Update profile"}):null,L?Object(ge.jsx)(ft,{t:P,post:q,setActive:F}):null]}),Object(ge.jsxs)("div",{className:mt.a.post__container,children:[Object(ge.jsxs)("div",{className:mt.a["post__icon--box"],children:[Object(ge.jsx)("div",{ref:W,onClickCapture:M,"data-type":"images",className:"".concat(mt.a.icon," ").concat(mt.a.active),children:Object(ge.jsx)(ye.q,{className:mt.a.image__icon})}),Object(ge.jsx)("div",{onClickCapture:M,className:"".concat(mt.a.icon),"data-type":"vlogs",children:Object(ge.jsx)(ye.F,{className:mt.a.video__icon})}),Object(ge.jsx)("div",{onClickCapture:M,className:"".concat(mt.a.icon),"data-type":"blogs",children:Object(ge.jsx)(ye.B,{className:mt.a.grid__icon})})]}),Object(ge.jsx)("div",{className:mt.a["post__img--container"],children:Y})]})]})})),gt=function(){var e,t=Object(s.d)((function(e){return e.diary}),Le.isEqual),n=Object(s.c)(),c=Object(a.useCallback)((function(e){return n(he(e))}),[n]),r=function(e){return n((t=e,function(){var e=Object(p.a)(b.a.mark((function e(n){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.post("/".concat(t.published),t);case 3:a=e.sent,c=a.data.diary,console.log(c),n({type:G,payload:{diary:c}}),n(le("Diary Updated Successfully","success")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:K});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()));var t},o=Object(a.useState)(t.content||""),i=Object(Ce.a)(o,2),l=i[0],u=i[1],j=Object(a.useState)(t.title||"Enter Your Title Here"),d=Object(Ce.a)(j,2),h=d[0],m=d[1],f=Object(a.useState)(""),O=Object(Ce.a)(f,2),g=O[0],x=O[1],v=Object(a.useState)((null===(e=t.published)||void 0===e?void 0:e.substr(0,10))||(new Date).toISOString().substr(0,10)),y=Object(Ce.a)(v,2),_=y[0],w=y[1];Object(a.useEffect)((function(){c((new Date).toISOString().substr(0,10))}),[c]),Object(a.useEffect)((function(){var e;u(t.content||""),m(t.title||"Enter Your Title Here"),w((null===(e=t.published)||void 0===e?void 0:e.substr(0,10))||(new Date).toISOString().substr(0,10))}),[t]);var S=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.files){e.next=3;break}return e.abrupt("return");case 3:(n=new FileReader).onload=function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,u(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(t.target.files[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ge.jsxs)("section",{id:tt.a.container,style:{width:"95%",margin:"2rem auto",boxSizing:"border-box",padding:"2vh 4vw"},children:[Object(ge.jsx)(dt.a,{}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsxs)("section",{class:tt.a.field,id:tt.a.fieldFile,children:[Object(ge.jsx)("label",{htmlFor:"file",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem",textTransform:"capitalize"},children:"Upload Diary:"}),Object(ge.jsxs)("section",{children:[Object(ge.jsx)(ye.e,{}),g||"No File Chosen"]}),Object(ge.jsx)("input",{name:"file",type:"file",id:tt.a.file,class:tt.a.input,accept:".txt",value:g,onChange:function(e){x(e.target.value),S(e)}})]}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),"Or ",Object(ge.jsx)("br",{})," Fill Your Diary Below",Object(ge.jsxs)("form",{onSubmit:function(){return console.log(l)},children:[Object(ge.jsx)("input",{class:tt.a.heading,type:"text",style:{border:"none"},value:h,onChange:function(e){return m(e.target.value)},required:!0})," ",Object(ge.jsx)("br",{}),Object(ge.jsx)("input",{className:"note",type:"date",value:_,onChange:function(e){c(e.target.value),w(e.target.value)},style:{fontSize:"1.8rem",marginTop:"-2rem",fontFamily:'"Patrick Hand", cursive'},required:!0}),Object(ge.jsx)("br",{}),Object(ge.jsx)("hr",{}),Object(ge.jsx)("textarea",{className:"note diaryArea",cols:"30",rows:"30",style:{fontSize:"2.2rem",lineHeight:"5.4rem",width:"100%",border:"none",fontFamily:'"Patrick Hand", cursive'},placeholder:"Your diary starts here",value:l,required:!0,onChange:function(e){return u(e.target.value)}}),Object(ge.jsx)("button",{type:"submit",class:tt.a.button,onClick:function(e){e.preventDefault(),r({content:l,published:_,title:h})},children:"save"})]})]})},xt=n.p+"static/media/Logo_2.5e45c54a.png",vt=n(35),yt=n.n(vt),_t=function(){return Object(ge.jsxs)("section",{class:yt.a.container,children:[Object(ge.jsx)("img",{src:xt,alt:"Logo",id:yt.a.logo}),Object(ge.jsx)("h1",{id:yt.a.heading,children:"Coming Soon"}),Object(ge.jsxs)("form",{id:yt.a.notifyContainer,children:[Object(ge.jsx)("input",{type:"email",placeholder:"Enter Your Email"}),Object(ge.jsx)("button",{type:"submit",children:"Notify me"})]}),Object(ge.jsx)("br",{}),Object(ge.jsx)(_e.a,{to:"/feed",children:Object(ge.jsx)("button",{id:yt.a.back,children:"Back to Civilization"})})]})},wt=function(){var e=Object(s.d)((function(e){return e.alerts})),t=Object(s.c)(),n=Object(a.useCallback)((function(e,n){return t({type:_,payload:{id:e}})}),[t]);return e.forEach((function(e){var t=e.msg,a=e.alertType,c=e.id;switch(a){case"success":return dt.b.success(t),void n(c);case"warning":return dt.b.warning(t),void n(c);case"error":return dt.b.error(t),void n(c);default:return}})),Object(ge.jsx)(dt.a,{})},St=function(e){var t=e.index,n=e.id,c=e.commentId,r=e.commentIndex,o=Object(s.d)((function(e){return e.posts.posts.filter((function(e){return e._id===n}))[0].comments[r].replies[t]})),i=Object(a.useState)(""),l=Object(Ce.a)(i,2),u=l[0],j=l[1],d=Object(s.c)(),h=function(){d(function(e,t,n){return function(){var a=Object(p.a)(b.a.mark((function a(c){var r,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ce.put("/unreply/".concat(e,"/").concat(t,"/").concat(n));case 3:r=a.sent,s=r.data.comments,c(le("Comment deleted successfully!","success")),c({type:L,payload:{id:e,comments:s}}),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(0),a.t0.response.data.errors.forEach((function(e){return c(le(e.msg,"error"))})),c({type:F});case 14:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(n,c,o._id))},m=Object(s.d)((function(e){return e.auth.user._id}));return Object(ge.jsxs)("section",{class:"post container",style:{marginLeft:"2vw"},children:[o.user===m?Object(ge.jsx)("i",{class:"delete_button",onClick:function(){h()},children:Object(ge.jsx)(ye.D,{})}):null,Object(ge.jsxs)("section",{className:"post-info",children:[Object(ge.jsx)("img",{src:o.avatar,alt:"Profile",className:"profile-photo"}),Object(ge.jsxs)("p",{className:"heading_main",style:{fontSize:"1.3rem"},children:[o.username,Object(ge.jsx)("br",{}),Object(ge.jsx)("span",{className:"note",children:"".concat(new Date(o.date).toLocaleString())})]})]}),Object(ge.jsx)("p",{className:"heading_main",style:{fontSize:"1.3rem"},children:o.reply}),Object(ge.jsx)("section",{className:"comment",children:Object(ge.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(de(n,c,"@".concat(o.username," ").concat(u))),j("")},children:[Object(ge.jsx)("textarea",{name:"comment",id:"comment",cols:"30",rows:"1",placeholder:"Reply to this travelcussion",value:u,onChange:function(e){j(e.target.value)},style:{border:"1px solid black",borderRadius:"0.3rem",width:"100%"}}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsxs)("button",{type:"submit",style:{fontSize:"1.1rem",padding:"1rem 2rem 2rem",background:"#3464ac",borderRadius:"1rem",height:"1.3rem"},children:[Object(ge.jsx)(ye.k,{}),"Reply to this travelcussion"]})]})}),Object(ge.jsx)("hr",{})]})},kt=function(e){var t=e.index,n=e.id,c=Object(s.d)((function(e){return e.posts.posts.filter((function(e){return e._id===n}))[0].comments[t]})),r=Object(a.useState)(""),o=Object(Ce.a)(r,2),i=o[0],l=o[1],u=Object(a.useState)(!1),j=Object(Ce.a)(u,2),d=j[0],h=j[1],m=Object(s.c)(),f=function(){m(function(e,t){return function(){var n=Object(p.a)(b.a.mark((function n(a){var c,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ce.put("/uncomment/".concat(e,"/").concat(t));case 3:c=n.sent,r=c.data.comments,a(le("Comment deleted successfully!","success")),a({type:L,payload:{id:e,comments:r}}),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),n.t0.response.data.errors.forEach((function(e){return a(le(e.msg,"error"))})),a({type:F});case 14:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,c._id))},O=Object(s.d)((function(e){return e.auth.user._id}),Le.isEqual);return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("section",{class:"post container",style:{borderRadius:"1rem",padding:"2rem",border:"1px solid #000"},children:[c.user===O?Object(ge.jsx)("i",{class:"delete_button",onClick:function(){f()},children:Object(ge.jsx)(ye.D,{})}):null,Object(ge.jsxs)("section",{className:"post-info",children:[Object(ge.jsx)("img",{src:c.avatar,alt:"Profile ",className:"profile-photo"}),Object(ge.jsxs)("p",{className:"heading_main",style:{fontSize:"1.3rem"},children:[c.username,Object(ge.jsx)("br",{}),Object(ge.jsx)("span",{className:"note",children:"".concat(new Date(c.date).toLocaleString())})]})]}),Object(ge.jsx)("p",{className:"heading_main",style:{fontSize:"1.3rem"},children:c.comment}),Object(ge.jsx)("br",{}),c.replies.length>0?Object(ge.jsxs)(ge.Fragment,{children:[d?Object(ge.jsxs)(ge.Fragment,{children:[c.replies.map((function(e,a){return Object(ge.jsx)(St,{index:a,id:n,commentId:c._id,commentIndex:t})})),Object(ge.jsx)("button",{onClick:function(){h(!1)},children:"Close Travelcussions"})]}):Object(ge.jsxs)("button",{onClick:function(){h(!0)},children:["View All ",c.replies.length," travelcussions"]}),Object(ge.jsx)("hr",{})]}):null,Object(ge.jsx)("section",{className:"comment",children:Object(ge.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i||m(le("Comment Text cannot be empty","error")),m(de(n,c._id,"@".concat(c.username," ").concat(i))),l("")},children:[Object(ge.jsx)("textarea",{name:"comment",id:"comment",cols:"30",rows:"1",placeholder:"Reply to this travelcussion",value:i,onChange:function(e){l(e.target.value)},style:{border:"1px solid black",borderRadius:"0.3rem",width:"100%"}}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsxs)("button",{type:"submit",style:{fontSize:"1.1rem",padding:"1rem 2rem 2rem",background:"#3464ac",borderRadius:"1rem",height:"1.3rem"},children:[Object(ge.jsx)(ye.k,{}),"Reply to this travelcussion"]})]})})]}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsx)("hr",{}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{})]})},Ct=function(){var e=Object(a.useState)(""),t=Object(Ce.a)(e,2),n=t[0],c=t[1],r=Object(fe.i)().id,o=Object(s.d)((function(e){return e.posts.posts.length>0?e.posts.posts.filter((function(e){return e._id===r}))[0]:[]})),i=o.comments,l=o.user,u=Object(s.d)((function(e){return e.auth.user}),Le.isEqual),j=Object(s.c)(),d=function(e){j(function(e,t){return function(){var n=Object(p.a)(b.a.mark((function n(a){var c,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ce.put("/comment/".concat(e),{comment:t});case 3:c=n.sent,r=c.data.comments,a(le("Commented on post successfully!","success")),a({type:L,payload:{id:e,comments:r}}),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),n.t0.response.data.errors.forEach((function(e){return a(le(e.msg,"error"))})),a({type:F});case 14:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(e,n)),j(me({title:"Someone commented on your post",body:"@".concat(u.username," commented on your post"),icon:"".concat(u.avatar)},"","comment",l._id))},h=Object(ge.jsx)("main",{class:"main",style:{margin:"0 auto",width:"80vw"},children:Object(ge.jsxs)("section",{className:"container",style:{width:"100%",textAlign:"center"},children:[Object(ge.jsx)("p",{class:"heading_main",style:{textTransform:"capitalize"},children:"No Comments Found"}),Object(ge.jsx)("br",{}),Object(ge.jsx)(_e.a,{to:"/feed",children:Object(ge.jsx)("button",{id:yt.a.back,children:"Back to Civilization"})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{}),Object(ge.jsx)("section",{className:"comment",children:Object(ge.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(r),c("")},children:[Object(ge.jsx)("textarea",{name:"comment",id:"comment",cols:"30",rows:"10",placeholder:"Add a new travelcussion",value:n,onChange:function(e){c(e.target.value)},style:{border:"1px solid black",borderRadius:"0.3rem",width:"95%",height:"10vh"}}),Object(ge.jsxs)("button",{type:"submit",style:{fontSize:"1.4rem",padding:"2rem",background:"#3464ac",borderRadius:"1rem"},children:[Object(ge.jsx)(ye.k,{}),"Add a new travelcussion"]})]})})]})});if(0===i.length)return h;var m=i.map((function(e,t){return Object(ge.jsx)(kt,{id:r,index:t})}));return Object(ge.jsx)("main",{class:"main",style:{margin:"0 auto",width:"80vw"},children:Object(ge.jsxs)("section",{className:"container",style:{width:"100%",padding:"2rem"},children:[m,Object(ge.jsx)("section",{className:"comment",children:Object(ge.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(r),c("")},children:[Object(ge.jsx)("textarea",{name:"comment",id:"comment",cols:"30",rows:"10",placeholder:"Add a new travelcussion",value:n,onChange:function(e){c(e.target.value)},style:{border:"1px solid black",borderRadius:"0.3rem",width:"95%",height:"10vh"}}),Object(ge.jsxs)("button",{type:"submit",style:{fontSize:"1.4rem",padding:"2rem",background:"#3464ac",borderRadius:"1rem"},children:[Object(ge.jsx)(ye.k,{}),"Add a new travelcussion"]})]})})]})})},Nt=n(9),Et=n.n(Nt),Tt=n.p+"static/media/Image2.06c79ce1.svg",It=function(){var e=Object(a.useState)(""),t=Object(Ce.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(Ce.a)(r,2),i=o[0],l=o[1],u=Object(a.useState)(!1),d=Object(Ce.a)(u,2),h=d[0],m=d[1],O=Object(s.c)(),g=Object(a.useCallback)((function(e,t){return O((n=e,function(){var e=Object(p.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.post("/signin",Object(j.a)({},n));case 3:t(le("Successfully logged in!","success")),t({type:x}),(a=new Date).setDate(a.getDate()+2),localStorage.setItem("expiryDate",a),localStorage.setItem("isAuthenticated","true"),t(ue()),f.push("/feed"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response.data.errors.forEach((function(e){return t(le(e.msg,"error"))})),t({type:v});case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()));var n}),[O]);return Object(ge.jsxs)("section",{className:Et.a.backgroundOverlay,children:[Object(ge.jsx)("section",{className:Et.a.overlay}),window.innerWidth<671?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("div",{className:Et.a.circleOne}),Object(ge.jsx)("div",{className:Et.a.circleTwo})]}):"",Object(ge.jsxs)("section",{className:Et.a.mainContainer,children:[window.innerWidth>=671?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("section",{className:Et.a.overlay2}),Object(ge.jsx)("img",{src:Tt,alt:"Traveller",className:Et.a.image})]}):"",Object(ge.jsxs)("form",{className:"".concat(Et.a.formContainer," ").concat(Et.a.formContainerIn),onSubmit:function(e){e.preventDefault(),g({email:n,password:i})},children:[Object(ge.jsx)("h1",{className:"".concat(Et.a.headingIn," ").concat(Et.a.heading),children:"Login"}),Object(ge.jsx)("label",{htmlFor:"email",className:Et.a.label,children:"Email"}),Object(ge.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)},required:!0,type:"email",className:Et.a.input,name:"email",placeholder:"Enter Your Email"}),Object(ge.jsxs)("section",{className:Et.a.inputIn,style:{position:"relative"},children:[Object(ge.jsx)("label",{className:Et.a.label,htmlFor:"password",children:"Password"}),Object(ge.jsx)("label",{className:Et.a.eye,onClick:function(){m(!h)},children:Object(ge.jsx)(ye.n,{})}),Object(ge.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)},required:!0,type:h?"text":"password",name:"password",className:"".concat(Et.a.input),style:{marginBottom:"0"},placeholder:"Enter Your Password"})]}),Object(ge.jsx)("button",{type:"submit",className:"buttonSubmit ".concat(Et.a.button),children:"Login"}),Object(ge.jsxs)("p",{className:Et.a.note,children:["Don't have an account?"," ",Object(ge.jsx)(_e.a,{to:"/auth/signup",children:Object(ge.jsx)("span",{className:"blue",children:"Register Here"})})]})]})]})]})},Pt=n.p+"static/media/Image1.0da532a9.svg",At=function(){var e=Object(a.useState)(""),t=Object(Ce.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),o=Object(Ce.a)(r,2),i=o[0],l=o[1],u=Object(a.useState)(""),d=Object(Ce.a)(u,2),h=d[0],m=d[1],x=Object(a.useState)(""),v=Object(Ce.a)(x,2),y=v[0],_=v[1],w=Object(a.useState)(!1),S=Object(Ce.a)(w,2),k=S[0],C=S[1],N=Object(a.useState)(!1),E=Object(Ce.a)(N,2),T=E[0],I=E[1],P=Object(s.c)(),A=Object(a.useCallback)((function(e,t){return P(le(e,t))}),[P]),R=Object(a.useCallback)((function(e){return P(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae.post("/signup",Object(j.a)({},e));case 3:n(le("Successfully signed up!","success")),n({type:O}),localStorage.setItem("isAuthenticated","true"),n(ue()),f.push("/feed"),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:g});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[P]);return Object(ge.jsxs)("section",{className:Et.a.backgroundOverlay,children:[Object(ge.jsx)("section",{className:Et.a.overlay}),window.innerWidth<671?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("div",{className:Et.a.circleOne}),Object(ge.jsx)("div",{className:Et.a.circleTwo})]}):"",Object(ge.jsxs)("section",{className:Et.a.mainContainer,children:[window.innerWidth>=671?Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)("section",{className:Et.a.overlay2}),Object(ge.jsx)("img",{src:Pt,alt:"Traveller",className:Et.a.image})]}):"",Object(ge.jsxs)("form",{className:"".concat(Et.a.formContainer," ").concat(Et.a.signup),onSubmit:function(e){e.preventDefault(),-1!==n.indexOf(" ")||-1!==n.indexOf("\t")||-1!==n.indexOf("\r")?A("Username cannot contain whitespaces","error"):h!==y?A("Passwords do not match","error"):R({username:n,email:i,password:h})},children:[Object(ge.jsx)("h1",{className:Et.a.heading,children:"Signup"}),Object(ge.jsx)("label",{htmlFor:"text",className:Et.a.label,children:"Username"}),Object(ge.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)},required:!0,type:"text",className:Et.a.input,name:"text",placeholder:"Enter Your Username"}),Object(ge.jsx)("label",{htmlFor:"email",className:Et.a.label,children:"Email"}),Object(ge.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)},required:!0,type:"email",className:Et.a.input,name:"email",placeholder:"Enter Your Email"}),Object(ge.jsxs)("section",{style:{position:"relative",marginBottom:"1vh"},children:[Object(ge.jsx)("label",{className:Et.a.eye,onClick:function(){C(!k)},children:Object(ge.jsx)(ye.n,{})}),Object(ge.jsx)("label",{className:Et.a.label,htmlFor:"password",children:"Password"}),Object(ge.jsx)("input",{style:{marginBottom:"0"},value:h,onChange:function(e){return m(e.target.value)},required:!0,type:k?"text":"password",name:"password",className:Et.a.input,placeholder:"Enter Your Password"})]}),Object(ge.jsxs)("section",{style:{position:"relative",marginBottom:"2vh"},children:[Object(ge.jsx)("label",{className:Et.a.eye,onClick:function(){I(!T)},children:Object(ge.jsx)(ye.n,{})}),Object(ge.jsx)("label",{className:Et.a.label,htmlFor:"confirm_pass",children:"Confirm Password"}),Object(ge.jsx)("input",{style:{marginBottom:"0"},value:y,onChange:function(e){return _(e.target.value)},required:!0,type:T?"text":"password",name:"confirm_pass",className:Et.a.input,placeholder:"Confirm Your Password"})]}),Object(ge.jsx)("button",{type:"submit",className:"buttonSubmit ".concat(Et.a.button),children:"Signup"}),Object(ge.jsxs)("p",{className:Et.a.note,children:["Already have an account?"," ",Object(ge.jsx)(_e.a,{to:"/auth/signin",children:Object(ge.jsx)("span",{className:"blue",children:"Login Here"})})]})]})]})]})},Rt=n(95),Dt=n(18),Lt=n.n(Dt),Ft=function(e){var t=e.socket,n=e.id,c=e.name,r=Object(a.useState)(""),o=Object(Ce.a)(r,2),i=o[0],l=o[1],u=Object(s.d)((function(e){return e.auth.user}),Le.isEqual),j=u.username,d=u.avatar,h=Object(s.d)((function(e){return e.auth.user._id}),Le.isEqual),m=Object(s.c)(),f=function(){return m(function(e){var t=e.id,n=e.message,a=e.date,c=e.user;return function(){var e=Object(p.a)(b.a.mark((function e(r){var s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.put("/message/".concat(t),{message:n,user:c,date:a});case 3:s=e.sent,o=s.data.chatRoom,r({type:H,payload:{room:o}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response.data.errors.forEach((function(e){return r(le(e.msg,"error"))}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}({id:n,message:i,user:h,date:Date.now()}))};return Object(ge.jsxs)("form",{style:{width:"100%",display:" flex",justifyContent:" flex-start",alignItems:" center",padding:" 2vh 2vw",boxSizing:" border-box"},onSubmit:function(e){e.preventDefault(),i&&(t.emit("chatMessage",{user:{_id:h,username:j,avatar:d},message:i,date:Date.now()}),l(""),f(),function(e){m(me({title:"New Message!",body:"@".concat(j," messaged ").concat(i.split(" ").slice(0,6)," in village ").concat(e),icon:"".concat(d)},n,"message",""))}(c))},children:[Object(ge.jsx)("input",{name:"message",id:"message",autoComplete:"off",placeholder:"Send a new message",value:i,onChange:function(e){l(e.target.value)},style:{border:"1px solid black",borderRadius:"0.3rem",background:"#fff",width:"60%",fontSize:"1.6rem",padding:"1vh 2vw"}}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(ge.jsxs)("button",{type:"submit",style:{fontSize:"1.4rem",padding:"2rem",background:"#3464ac",borderRadius:"1rem"},children:[Object(ge.jsx)(ye.t,{})," \xa0\xa0\xa0 Send Message"]})]})},zt=Object(s.b)((function(e){return{loggedInUserId:e.auth.user._id,msgs:e.chatRooms.room.messages}}))((function(e){var t=e.socket,n=e.msgs,c=void 0===n?[]:n,r=e.loggedInUserId,s=Object(a.useState)(c),o=Object(Ce.a)(s,2),i=o[0],l=o[1],u=Object(a.useRef)(null);Object(a.useEffect)((function(){return l(c)}),[c]),Object(a.useEffect)((function(){var e;return null===(e=u.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})})),Object(a.useEffect)((function(){t.on("chatMessage",(function(e){l((function(t){return[].concat(Object(ot.a)(t),[e])}))}))}),[t]);var j=i.map((function(e,t){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("section",{ref:t===i.length-1?u:null,className:"".concat(Lt.a.chat," ").concat(e.user._id===r?Lt.a.loggedInMessage:""),children:[Object(ge.jsxs)("section",{className:"post-info",children:[Object(ge.jsx)("img",{src:e.user.avatar,alt:"Profile ",className:"profile-photo"}),Object(ge.jsxs)("p",{className:"heading_main",style:{fontSize:"1.3rem"},children:["@",e.user.username,Object(ge.jsx)("br",{}),Object(ge.jsx)("span",{className:"note",style:{fontSize:"1.3rem"},children:new Date(e.date).toLocaleString()})]})]}),Object(ge.jsx)("p",{className:"heading_main",style:{fontSize:"1.3rem"},children:e.message})]},t),Object(ge.jsx)("hr",{style:{width:"100%"}}),Object(ge.jsx)("br",{})]})}));return Object(ge.jsx)(ge.Fragment,{children:Object(ge.jsx)("section",{className:Lt.a.chats__container,style:{height:"50vh",overflowY:"scroll",overflowX:"hidden"},children:j})})})),Ut=function(e){var t,n=e.id,c=e.setName,r=Object(s.c)(),o=Object(a.useCallback)((function(){return r(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.get("/".concat(e));case 3:a=t.sent,c=a.data.chatRoom,n({type:Y,payload:{room:c}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))}));case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(n))}),[r,n]);Object(a.useEffect)((function(){return o()}),[o]);var i=Object(s.d)((function(e){return e.chatRooms.room}));Object(a.useEffect)((function(){return c(i.title)}),[i,c]);for(var l=[],u=0;u<3&&i.users.length>u;u++)l.push(Object(ge.jsx)("section",{className:Lt.a.dp,children:Object(ge.jsx)(_e.a,{to:"profile/".concat(i.users[u].user._id),children:Object(ge.jsx)("img",{src:i.users[u].user.avatar,alt:"Profile",className:"profile-photo"})})},u));return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsxs)("section",{className:Lt.a.chatBox__headingContainer,children:[Object(ge.jsxs)("section",{style:{height:"100%",width:"100%"},children:[Object(ge.jsx)("img",{src:i.profileImage,alt:"Dp",className:"".concat(Lt.a.chatBox__image)}),"\xa0\xa0\xa0\xa0",Object(ge.jsxs)("h1",{className:"heading_main",style:{display:"inline-block",margin:"0",textTransform:"capitalize"},children:[i.title,Object(ge.jsx)("br",{}),Object(ge.jsxs)("p",{className:"note",style:{fontSize:"1rem"},children:[null===(t=i.users)||void 0===t?void 0:t.length," members"]})]})]}),Object(ge.jsxs)("section",{className:Lt.a.usersContainer,children:[l,Object(ge.jsx)(_e.a,{children:Object(ge.jsx)("p",{className:"note blue",style:{fontSize:"0.8rem"},children:"See All Users..."})})]})]}),Object(ge.jsx)("br",{}),Object(ge.jsx)("br",{})]})},qt=function(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(n),c=new Uint8Array(a.length),r=0;r<a.length;++r)c[r]=a.charCodeAt(r);return c}("BINa5yF4b57BFKnAggUVkfXOS4WdvqhHvv9Gh-VQoQmUyXfN3p7aV0CfkRL8YAjAsboGqcKzbflcucDsuD37JTA");var Bt=function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.post("/subscribe",{subscription:t},{headers:{"Content-Type":"application/json"}});case 2:console.log(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Wt=Object(s.b)((function(e){return{chatRooms:e.chatRooms,username:e.auth.user.username,avatar:e.auth.user.avatar,loggedInUserId:e.auth.user._id}}),{loadRooms:function(){return function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.get("/");case 2:n=e.sent,a=n.data.chatRooms,t({type:M,payload:{rooms:a}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.chatRooms,n=e.loadRooms,c=e.username,r=e.avatar,s=e.loggedInUserId,o=Object(a.useState)(null),i=Object(Ce.a)(o,2),l=i[0],u=i[1],j=Object(a.useState)([]),d=Object(Ce.a)(j,2),b=d[0],p=d[1],h=Object(a.useState)(""),m=Object(Ce.a)(h,2),f=m[0],O=m[1],g=Ne().get("room");Object(a.useEffect)((function(){"denied"!==Notification.permission&&"granted"!==Notification.permission&&Notification.requestPermission(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.pushManager?e.pushManager.getSubscription().then((function(t){null===t?(console.log("No subscription detected, make a request."),e.pushManager.subscribe({applicationServerKey:qt,userVisibleOnly:!0}).then((function(e){console.log("New subscription added."),Bt(e)})).catch((function(e){"granted"!==Notification.permission?console.log("Permission was not granted."):console.error("An error ocurred during the subscription process.",e)}))):(console.log("Existed subscription detected."),Bt(t))})):console.log("Push manager unavailable.")})).catch((function(e){console.error("An error ocurred during Service Worker registration.",e)}))}),[]),Object(a.useEffect)((function(){if(n(),g){var e=Object(Rt.io)();return u(e),e.on("connect",(function(){console.log("connected"),e.emit("joinRoom",{room:g,username:c,avatar:r,userId:s})})),e.on("onlineUsers",(function(e){return p(e)})),function(){e.close()}}}),[u,n,g,s,c,r]);var x=t.rooms.map((function(e){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(_e.a,{to:"?room=".concat(e._id),children:Object(ge.jsxs)("section",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[Object(ge.jsx)("img",{src:e.profileImage,alt:"",className:"profile-photo"}),Object(ge.jsx)("p",{className:"sub-headings",style:{fontSize:"1rem",fontWeight:"600",textTransform:"capitalize"},children:e.title})]})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("hr",{style:{width:"100%"}}),Object(ge.jsx)("br",{})]})})),v=b.map((function(e){return Object(ge.jsxs)(ge.Fragment,{children:[Object(ge.jsx)(_e.a,{to:"profile/".concat(e.userId),children:Object(ge.jsxs)("section",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[Object(ge.jsx)("img",{src:e.avatar,alt:"Profile",className:"profile-photo"}),Object(ge.jsx)("p",{className:"sub-headings",style:{fontSize:"1rem",fontWeight:"600"},children:e.username})]})}),Object(ge.jsx)("br",{}),Object(ge.jsx)("hr",{style:{width:"100%"}}),Object(ge.jsx)("br",{})]})}));return Object(ge.jsxs)("section",{style:{width:"95%",margin:"2vh auto"},children:[Object(ge.jsx)(dt.a,{}),Object(ge.jsxs)("section",{className:"container ".concat(Lt.a.container),children:[Object(ge.jsxs)("section",{className:Lt.a.sidebar,children:[Object(ge.jsx)("h1",{className:"sub-headings",style:{marginBottom:"4vh",fontWeight:"bolder"},children:"Villages"}),x,Object(ge.jsx)(_e.a,{to:"create/room",children:Object(ge.jsx)("button",{className:"sub-headings",style:{background:"#000",color:"#fff",padding:"1vh 1vw",borderRadius:"1rem"},children:"Create A Village"})}),Object(ge.jsx)("hr",{style:{width:"100%"}}),Object(ge.jsx)("br",{})]}),l?Object(ge.jsxs)("section",{className:Lt.a.chatBox,children:[Object(ge.jsx)(Ut,{id:g,setName:O}),Object(ge.jsx)(zt,{socket:l,id:g}),Object(ge.jsx)(Ft,{socket:l,id:g,name:f})]}):Object(ge.jsxs)("section",{className:"container",children:[" ",Object(ge.jsx)("h1",{className:"note",style:{margin:"4vh 2vw",fontWeight:"bolder"},children:"Please Select a village"})]}),Object(ge.jsxs)("section",{className:Lt.a.sidebar,children:[Object(ge.jsx)("h1",{className:"sub-headings",style:{marginBottom:"4vh",fontWeight:"bolder"},children:"Online Users"}),v]})]})]})})),Mt=function(){var e=Object(a.useState)(""),t=Object(Ce.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),o=Object(Ce.a)(r,2),i=o[0],l=o[1],u=Object(a.useState)(""),j=Object(Ce.a)(u,2),d=j[0],h=j[1],m=Object(a.useState)(20),O=Object(Ce.a)(m,2),g=O[0],x=O[1],v=Object(a.useState)(""),y=Object(Ce.a)(v,2),_=y[0],w=y[1],S=Object(s.c)(),k=function(e){S(function(e){return function(){var t=Object(p.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re.post("/",e);case 3:n(le("Village proposal has been sent for review! The review process may take upto 1 day","success")),f.push("/chat"),n({type:"CREATE_CHAT_ROOM"}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))}));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))};return Object(ge.jsxs)("form",{id:ut.a.form,onSubmit:function(e){e.preventDefault(),g>20&&S(le("Max Limit cannot be above 20","error"));var t=new FormData;t.append("title",n),t.append("maxLimit",g),t.append("description",_),t.append("file",i),k(t)},encType:"multipart/form-data",children:[Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsx)("label",{htmlFor:"title",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:"Title"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("input",{name:"title",class:ut.a.input,value:n,required:!0,onChange:function(e){return c(e.target.value)}})]}),Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsxs)("label",{htmlFor:"maxLimit",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:["Choose maximum number of users ","(","defaults to 20",")"]}),Object(ge.jsx)("br",{}),Object(ge.jsx)("input",{name:"maxLimit",class:ut.a.input,value:g,max:20,type:"number",onChange:function(e){return x(e.target.value)}})]}),Object(ge.jsxs)("section",{class:ut.a.field,id:ut.a.fieldFile,children:[Object(ge.jsx)("label",{htmlFor:"file",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem",textTransform:"capitalize"},children:"Upload Group image:"}),Object(ge.jsxs)("section",{style:{top:"1vh",left:"16vw"},children:[Object(ge.jsx)(ye.q,{}),d||"No Image Chosen"]}),Object(ge.jsx)("input",{required:!0,name:"file",type:"file",id:ut.a.file,class:ut.a.input,accept:"image/png, image/jpeg",value:d,onChange:function(e){h(e.target.value),l(e.target.files[0])}})]}),Object(ge.jsxs)("section",{class:ut.a.field,children:[Object(ge.jsx)("label",{htmlFor:"description",class:"note",style:{fontSize:"1.5rem",marginRight:"2rem"},children:"Description"}),Object(ge.jsx)("br",{}),Object(ge.jsx)("textarea",{required:!0,name:"description",placeholder:"A chat room to create awareness about destinations in Goa",class:"desc ".concat(ut.a.input),cols:"30",rows:"3",value:_,onChange:function(e){return w(e.target.value)}})]}),Object(ge.jsx)("button",{type:"submit",class:ut.a.button,children:"Create Room"})]})},Yt=function(){return Object(ge.jsxs)("section",{style:{width:"95%",margin:"2vh auto"},children:[Object(ge.jsx)(dt.a,{}),Object(ge.jsxs)("section",{className:"container ".concat(ut.a.container),children:[Object(ge.jsx)("h1",{class:ut.a.heading,children:"Create new chat room"}),Object(ge.jsx)(Mt,{})]})]})},Ht=function(){var e=Object(a.useState)(!0),t=Object(Ce.a)(e,2),n=t[0],c=t[1];n||f.push("/feed");var r=Object(fe.h)(),o=Object(s.c)(),i=Object(a.useCallback)((function(){return o((e=r.pathname.split("/")[2],function(){var t=Object(p.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.get("/".concat(e));case 3:a=t.sent,c=a.data.post,n({type:Z,payload:c}),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response),t.t0.response.data.errors.forEach((function(e){return n(le(e.msg,"error"))})),n({type:Q});case 14:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()));var e}),[o,r]);Object(a.useEffect)((function(){i()}),[i]);var l=Object(s.d)((function(e){return e.posts.post}));return Object(ge.jsx)(ft,{post:l,t:l.type,setActive:c})},Vt=function(){var e=Object(s.d)((function(e){return e.auth.isAuthenticated}));return Object(ge.jsxs)(fe.c,{history:f,children:[Object(ge.jsx)(wt,{}),Object(ge.jsxs)(fe.d,{children:[Object(ge.jsx)(fe.b,{path:"/auth/signin",exact:!0,component:function(){return e?Object(ge.jsx)(fe.a,{to:"/feed"}):Object(ge.jsx)(It,{})}}),Object(ge.jsx)(fe.b,{path:"/auth/signup",exact:!0,component:function(){return e?Object(ge.jsx)(fe.a,{to:"/feed"}):Object(ge.jsx)(At,{})}}),Object(ge.jsx)(fe.b,{path:"/feed",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(pt,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(fe.b,{path:"/post/:id",exact:!0,component:function(){return Object(ge.jsx)(Ht,{})}}),Object(ge.jsx)(ve,{path:"/comments/:id",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(Ct,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(fe.b,{path:"/profile/:id",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(Ot,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(ve,{path:"/create/room",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(Yt,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(ve,{path:"/results",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(st,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(ve,{path:"/post",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(bt,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(ve,{path:"/diary",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(gt,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(ve,{path:"/market",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(_t,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(ve,{path:"/chat",exact:!0,component:function(){return Object(ge.jsxs)("section",{children:[Object(ge.jsx)(Pe,{}),Object(ge.jsx)(Wt,{}),Object(ge.jsx)(De,{})]})}}),Object(ge.jsx)(fe.b,{path:"*",exact:!0,component:function(){return Object(ge.jsx)(fe.a,{to:"/feed"})}})]})]})},Gt=function(){Object(a.useEffect)((function(){Date.parse(new Date)-Date.parse(localStorage.getItem("expiryDate"))>0&&localStorage.setItem("isAuthenticated","false")}),[]);var e=Object(s.c)(),t=Object(a.useCallback)((function(){return e(ue())}),[e]);return Object(a.useEffect)((function(){t()}),[t]),Object(ge.jsxs)("section",{style:{height:"100%"},children:[Object(ge.jsxs)(u.a,{children:[Object(ge.jsx)("meta",{property:"title",content:"Tragency Village"}),Object(ge.jsx)("meta",{property:"quote",content:"Tragency | Where traveller's feel at home"}),Object(ge.jsx)("meta",{name:"description",content:"Remotely connecting like minded travelers'. Come & connect with fellow travelers & post cool travel experience to become travel influencer."}),Object(ge.jsx)("meta",{property:"image",content:"https://res.cloudinary.com/tragencymedia/image/upload/v1633071748/dfdhcqlye7qj3wpwvtdy.jpg"}),Object(ge.jsx)("meta",{property:"og:locale",content:"en_IN"}),Object(ge.jsx)("meta",{property:"og:type",content:"website"}),Object(ge.jsx)("meta",{property:"og:title",content:"Tragency Village"}),Object(ge.jsx)("meta",{property:"og:quote",content:"Tragency | Where traveller's feel at home"}),Object(ge.jsx)("meta",{property:"og:hashtag",content:"Tragency #travel #travelcommunity #travelfun #goa #beach #TragencyVillage"}),Object(ge.jsx)("meta",{property:"og:image",content:"https://res.cloudinary.com/tragencymedia/image/upload/v1633071748/dfdhcqlye7qj3wpwvtdy.jpg"}),Object(ge.jsx)("meta",{content:"image/*",property:"og:image:type"}),Object(ge.jsx)("meta",{property:"og:url",content:"https://tragency-media.herokuapp.com/"}),Object(ge.jsx)("meta",{property:"og:site_name",content:"Tragency"}),Object(ge.jsx)("meta",{property:"og:description",content:"Remotely connecting like minded travelers'. Come & connect with fellow travelers & post cool travel experience to become travel influencer."}),Object(ge.jsx)("title",{children:"Tragency Village"})]}),Object(ge.jsx)(Vt,{})]})},Kt=[],Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y:return[].concat(Object(ot.a)(e),[a]);case _:return e.filter((function(e){return e.id!==a.id}));default:return e}},Xt={isAuthenticated:!1,loading:!0,user:{}},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case O:case x:case C:return Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!0,loading:!1});case g:case v:case S:return Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!1,loading:!1});case w:return Object(j.a)(Object(j.a)(Object(j.a)({},e),a),{},{isAuthenticated:!0,loading:!1});case k:return Object(j.a)(Object(j.a)({},e),{},{user:{},isAuthenticated:!1,loading:!1});case X:return Object(j.a)(Object(j.a)({},e),{},{user:a.user});default:return e}},Qt={posts:[],loading:!0,hasMore:!0,post:{}},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case E:return Object(j.a)(Object(j.a)({},e),{},{posts:a.posts,loading:!1,hasMore:!0});case N:return Object(j.a)(Object(j.a)({},e),{},{posts:[],loading:!0,hasMore:!1});case T:return Object(j.a)(Object(j.a)({},e),{},{posts:[].concat(Object(ot.a)(e.posts),[a])});case I:case R:case W:case A:case F:return Object(j.a)({},e);case D:return Object(j.a)(Object(j.a)({},e),{},{posts:e.posts.map((function(e){return e._id===a.id?Object(j.a)(Object(j.a)({},e),{},{likes:a.likes}):e}))});case B:return Object(j.a)(Object(j.a)({},e),{},{posts:e.posts.map((function(e){return e._id===a.id?Object(j.a)(Object(j.a)({},e),{},{reports:a.reports}):e}))});case P:return Object(j.a)(Object(j.a)({},e),{},{posts:e.posts.map((function(e){return e._id===a.id?null:e}))});case L:return Object(j.a)(Object(j.a)({},e),{},{posts:e.posts.map((function(e){return e._id===a.id?Object(j.a)(Object(j.a)({},e),{},{comments:a.comments}):e}))});case z:return Object(j.a)(Object(j.a)({},e),{},{posts:[].concat(Object(ot.a)(e.posts),Object(ot.a)(a.posts)),loading:!1,hasMore:!0});case U:return Object(j.a)(Object(j.a)({},e),{},{loading:!0,hasMore:!1});case q:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case Z:return Object(j.a)(Object(j.a)({},e),{},{post:a});case Q:return Object(j.a)(Object(j.a)({},e),{},{post:{}});default:return e}},en={rooms:[],room:{users:[],messages:[]}},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case M:return Object(j.a)(Object(j.a)({},e),{},{rooms:a.rooms});case Y:case H:return Object(j.a)(Object(j.a)({},e),{},{room:a.room});default:return e}},nn={},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case V:case G:return a.diary;case K:return{};default:return e}},cn={},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case J:case X:return a.profile;default:return e}},sn=[],on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case $:return a.notifications;case ee:return[].concat(Object(ot.a)(e),[a.notification]);default:return e}},ln=Object(o.combineReducers)({alerts:Jt,auth:Zt,posts:$t,chatRooms:tn,diary:an,profile:rn,notifications:on}),un=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function jn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var dn=[l.a],bn=Object(o.createStore)(ln,Object(i.composeWithDevTools)(o.applyMiddleware.apply(void 0,dn)));r.a.render(Object(ge.jsx)(s.a,{store:bn,children:Object(ge.jsx)(Gt,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/").concat("service-worker.js");un?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):jn(t,e)}))}}()},18:function(e,t,n){e.exports={sidebar:"ChatRoom_sidebar__1IuAj",chatBox__image:"ChatRoom_chatBox__image__19s7l",chat:"ChatRoom_chat__vFwoZ",chats__container:"ChatRoom_chats__container__Padck",loggedInMessage:"ChatRoom_loggedInMessage__3eWGk",usersContainer:"ChatRoom_usersContainer__1Za14",dp:"ChatRoom_dp__80kxk",container:"ChatRoom_container__ecM7R",chatBox__headingContainer:"ChatRoom_chatBox__headingContainer__2Rday",chatBox:"ChatRoom_chatBox__2OzdX"}},25:function(e,t,n){e.exports={footer:"Footer_footer__2_rfE",copyright:"Footer_copyright__KD3px",highlighted:"Footer_highlighted__3FKiw",middleContainer:"Footer_middleContainer__dkgOQ",linkContainer:"Footer_linkContainer__WaFvB",link:"Footer_link__2GEFI",links:"Footer_links__2vWd_"}},32:function(e,t,n){e.exports={container:"Diary_container__CGgjE",field:"Diary_field__baFaf",fieldFile:"Diary_fieldFile__2fnm6",file:"Diary_file__mA2uh",heading:"Diary_heading__1Y_CM",button:"Diary_button__2T6ib"}},33:function(e,t,n){e.exports={container:"Top_container__3KQA-",heading:"Top_heading__364uI",location:"Top_location__3zr07"}},35:function(e,t,n){e.exports={logo:"Coming_logo__b5mJO",container:"Coming_container__3ZIRo",heading:"Coming_heading__2JHju",notifyContainer:"Coming_notifyContainer__2PM96",back:"Coming_back__UGAqp"}},37:function(e,t,n){e.exports={menu:"Menu_menu__1eHHA",overlay:"Menu_overlay__iU4ct",active:"Menu_active__2ld86",message:"Menu_message__28Jou"}},56:function(e,t,n){e.exports={searchBar:"SearchBar_searchBar__2VJwi",search:"SearchBar_search__3e_iA",submit:"SearchBar_submit__1kbl0"}},63:function(e,t,n){e.exports={carouselContainer:"Carousel_carouselContainer__33bTv"}},9:function(e,t,n){e.exports={backgroundOverlay:"Auth_backgroundOverlay__3D2Ym",overlay:"Auth_overlay__Ya2hd",mainContainer:"Auth_mainContainer__7k6oK",overlay2:"Auth_overlay2__2IV57",formContainer:"Auth_formContainer__EH68l",heading:"Auth_heading__1E1yK",headingIn:"Auth_headingIn__3fHZk",image:"Auth_image__3KCJw",circleOne:"Auth_circleOne__1W3CX",circleTwo:"Auth_circleTwo__ftdUh",input:"Auth_input__Hf7cx",inputIn:"Auth_inputIn__3ADO-",button:"Auth_button__3Zw36",eye:"Auth_eye__1mg4j",signup:"Auth_signup__216si",note:"Auth_note__2-Zh5",label:"Auth_label__JLEK4"}},93:function(e,t,n){e.exports={header:"Header_header__2wKvB"}}},[[161,1,2]]]);
//# sourceMappingURL=main.8f38e9fc.chunk.js.map